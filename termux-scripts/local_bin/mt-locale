#!/data/data/com.termux/files/usr/bin/sh

if [ -z "$1" ]; then
    echo "用法: $0 <文件或文件夹路径>"
    exit 1
fi

TARGET_PATH=$(realpath "$1")

if [ ! -e "$TARGET_PATH" ]; then
    echo "错误: 路径 '$TARGET_PATH' 不存在。"
    exit 1
fi

MIME_TYPE_OPTION=""
if [ -d "$TARGET_PATH" ]; then
    MIME_TYPE_OPTION="-t resource/folder"
fi

am start \
    --grant-read-uri-permission \
    -a android.intent.action.VIEW \
    -n bin.mt.plus/bin.mt.plus.OpenFileActivity \
    "$MIME_TYPE_OPTION" \
    -d "file://${TARGET_PATH}"
